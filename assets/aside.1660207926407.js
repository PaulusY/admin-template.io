import{L as k,s as _,aE as q,a3 as M,m as S,j as B,l as H,aJ as N,a6 as V,a7 as d,o as g,S as L,T as y,a as w,aa as j,F as $,_ as b,b as A,Z as F,ab as x,K as O,k as P,U,V as z,X as J,O as K}from"./vue.1660207926407.js";import{u as W,a as D,d as X,b as Z,p as G}from"./index.1660207926407.js";import{S as Q,L as Y}from"./main.1660207926407.js";const ee=k({name:"navMenuVertical",components:{SubItem:Q},props:{menuList:{type:Array,default:()=>[]}},setup(n){const l=W(),{themeConfig:m}=_(l),f=q(),u=M({defaultActive:f.meta.isDynamic?f.meta.isDynamicPath:f.path,isCollapse:!1}),i=S(()=>n.menuList),p=S(()=>m.value),o=r=>{const{path:a,meta:c}=r,t=c.isDynamic?c.isDynamicPath.split("/"):a.split("/");return t.length>=4&&c.isHide?t.splice(0,3).join("/"):a};return B(m.value,()=>{document.body.clientWidth<=1e3?u.isCollapse=!1:u.isCollapse=m.value.isCollapse},{immediate:!0}),H(()=>{u.defaultActive=o(f)}),N(r=>{u.defaultActive=o(r),document.body.clientWidth<1e3&&(m.value.isCollapse=!1)}),{menuLists:i,getThemeConfig:p,...V(u)}}});function te(n,l,m,f,u,i){const p=d("SvgIcon"),o=d("SubItem"),r=d("el-sub-menu"),a=d("el-menu-item"),c=d("el-menu");return g(),L(c,{router:"","default-active":n.defaultActive,"background-color":"transparent",collapse:n.isCollapse,"unique-opened":n.getThemeConfig.isUniqueOpened,"collapse-transition":!1},{default:y(()=>[(g(!0),w($,null,j(n.menuLists,t=>(g(),w($,null,[t.children&&t.children.length>0?(g(),L(r,{index:t.path,key:t.path},{title:y(()=>[b(p,{name:t.meta.icon},null,8,["name"]),A("span",null,F(t.meta.title),1)]),default:y(()=>[b(o,{chil:t.children},null,8,["chil"])]),_:2},1032,["index"])):(g(),L(a,{index:t.path,key:t.path},x({default:y(()=>[b(p,{name:t.meta.icon},null,8,["name"])]),_:2},[!t.meta.isLink||t.meta.isLink&&t.meta.isIframe?{name:"title",fn:y(()=>[A("span",null,F(t.meta.title),1)])}:{name:"title",fn:y(()=>[A("a",{href:t.meta.isLink,target:"_blank",rel:"opener",class:"w100"},F(t.meta.title),9,["href"])])}]),1032,["index"]))],64))),256))]),_:1},8,["default-active","collapse","unique-opened"])}const se=D(ee,[["render",te]]),ne=k({name:"layoutAside",components:{Logo:Y,Vertical:se},setup(){const{proxy:n}=P(),l=X(),m=W(),f=Z(),{routesList:u}=_(l),{themeConfig:i}=_(m),{isTagsViewCurrenFull:p}=_(f),o=M({menuList:[],clientWidth:0}),r=S(()=>{const{layout:e,isCollapse:s,menuBar:h}=i.value,C=["#FFFFFF","#FFF","#fff","#ffffff"].includes(h)?"layout-el-aside-br-color":"";if(o.clientWidth<=1e3)if(s){document.body.setAttribute("class","el-popup-parent--hidden");const I=document.querySelector(".layout-container"),v=document.createElement("div");return v.setAttribute("class","layout-aside-mobile-mode"),I.appendChild(v),v.addEventListener("click",a),[C,"layout-aside-mobile","layout-aside-mobile-open"]}else return a(),[C,"layout-aside-mobile","layout-aside-mobile-close"];else return e==="columns"?s?[C,"layout-aside-pc-1"]:[C,"layout-aside-pc-220"]:s?[C,"layout-aside-pc-64"]:[C,"layout-aside-pc-220"]}),a=()=>{const e=document.querySelector(".layout-aside-mobile-mode");e==null||e.setAttribute("style","animation: error-img-two 0.3s"),setTimeout(()=>{var h;(h=e==null?void 0:e.parentNode)==null||h.removeChild(e)},300),document.body.clientWidth<1e3&&(i.value.isCollapse=!1),document.body.setAttribute("class","")},c=S(()=>{let{layout:e,isShowLogo:s}=i.value;return s&&e==="defaults"||s&&e==="columns"}),t=()=>{if(i.value.layout==="columns")return!1;o.menuList=R(u.value)},R=e=>e.filter(s=>!s.meta.isHide).map(s=>(s=Object.assign({},s),s.children&&(s.children=R(s.children)),s)),T=e=>{o.clientWidth=e},E=e=>{let{layout:s}=i.value;if(s!=="columns")return!1;e||n.mittBus.emit("restoreDefault"),l.setColumnsMenuHover(e)};return B(i.value,e=>{if(e.isShowLogoChange!==e.isShowLogo){if(!n.$refs.layoutAsideScrollbarRef)return!1;n.$refs.layoutAsideScrollbarRef.update()}}),B(G.state,e=>{let{layout:s,isClassicSplitMenu:h}=e.themeConfig.themeConfig;if(s==="classic"&&h)return!1;t()},{deep:!0}),O(()=>{T(document.body.clientWidth),t(),n.mittBus.on("setSendColumnsChildren",e=>{o.menuList=e.children}),n.mittBus.on("setSendClassicChildren",e=>{let{layout:s,isClassicSplitMenu:h}=i.value;s==="classic"&&h&&(o.menuList=[],o.menuList=e.children)}),n.mittBus.on("getBreadcrumbIndexSetFilterRoutes",()=>{t()}),n.mittBus.on("layoutMobileResize",e=>{T(e.clientWidth),a()})}),{setCollapseStyle:r,setShowLogo:c,isTagsViewCurrenFull:p,onAsideEnterLeave:E,...V(o)}}}),oe={class:"h100"};function ie(n,l,m,f,u,i){const p=d("Logo"),o=d("Vertical"),r=d("el-scrollbar"),a=d("el-aside");return U((g(),w("div",oe,[b(a,{class:K(["layout-aside",n.setCollapseStyle])},{default:y(()=>[n.setShowLogo?(g(),L(p,{key:0})):J("",!0),b(r,{class:"flex-auto",ref:"layoutAsideScrollbarRef",onMouseenter:l[0]||(l[0]=c=>n.onAsideEnterLeave(!0)),onMouseleave:l[1]||(l[1]=c=>n.onAsideEnterLeave(!1))},{default:y(()=>[b(o,{menuList:n.menuList},null,8,["menuList"])]),_:1},512)]),_:1},8,["class"])],512)),[[z,!n.isTagsViewCurrenFull]])}const ce=D(ne,[["render",ie]]);export{ce as A};
