import{L as x,i as $,s as S,aE as V,aI as E,a3 as U,j as z,l as J,H as X,aJ as Z,a6 as q,k as G,n as K,a7 as c,o as f,a as g,_ as d,T as H,b as C,F as Q,aa as W,O as _,Z as O,m as Y,S as L,X as R}from"./vue.1660200332852.js";import{d as ee,u as B,p as se,a as F}from"./index.1660200332852.js";import{A as te}from"./aside.1660200332852.js";import{H as ne,M as oe}from"./main.1660200332852.js";import"./logo-mini.1660200332852.js";import"./parent.1660200332852.js";const le=x({name:"layoutColumnsAside",setup(){const n=$([]),m=$(),{proxy:i}=G(),p=ee(),M=B(),{routesList:k,isColumnsMenuHover:h,isColumnsNavHover:A}=S(p),{themeConfig:t}=S(M),a=V(),u=E(),s=U({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[]}),v=e=>{s.liIndex=e,m.value.style.top=`${n.value[e].offsetTop+s.difference}px`},T=(e,o)=>{v(o);let{path:l,redirect:r}=e;r?u.push(r):u.push(l)},D=(e,o)=>{let{path:l}=e;s.liOldPath=l,s.liOldIndex=o,s.liHoverIndex=o,i.mittBus.emit("setSendColumnsChildren",y(l)),p.setColumnsMenuHover(!1),p.setColumnsNavHover(!0)},N=async()=>{await p.setColumnsNavHover(!1),setTimeout(()=>{!h&&!A&&i.mittBus.emit("restoreDefault")},100)},I=e=>{K(()=>{v(e)})},w=()=>{s.columnsAsideList=b(k.value);const e=y(a.path);if(Object.keys(e).length<=0)return!1;I(e.item[0].k),i.mittBus.emit("setSendColumnsChildren",e)},y=e=>{const o=e.split("/");let l={};return s.columnsAsideList.map((r,j)=>{r.path===`/${o[1]}`&&(r.k=j,l.item=[{...r}],l.children=[{...r}],r.children&&(l.children=r.children))}),l},b=e=>e.filter(o=>!o.meta.isHide).map(o=>(o=Object.assign({},o),o.children&&(o.children=b(o.children)),o)),P=e=>{s.routeSplit=e.split("/"),s.routeSplit.shift();const o=`/${s.routeSplit[0]}`,l=s.columnsAsideList.find(r=>r.path===o);if(!l)return!1;setTimeout(()=>{I(l.k)},0)};return z(se.state,e=>{if(e.themeConfig.themeConfig.columnsAsideStyle==="columnsRound"?s.difference=3:s.difference=0,!e.routesList.isColumnsMenuHover&&!e.routesList.isColumnsNavHover)s.liHoverIndex=null,i.mittBus.emit("setSendColumnsChildren",y(a.path));else{if(s.liHoverIndex=s.liOldIndex,!s.liOldPath)return!1;i.mittBus.emit("setSendColumnsChildren",y(s.liOldPath))}},{deep:!0}),J(()=>{w(),i.mittBus.on("restoreDefault",()=>{s.liOldIndex=null,s.liOldPath=null})}),X(()=>{i.mittBus.off("restoreDefault",()=>{})}),Z(e=>{P(e.path),i.mittBus.emit("setSendColumnsChildren",y(e.path))}),{themeConfig:t,columnsAsideOffsetTopRefs:n,columnsAsideActiveRef:m,onColumnsAsideDown:I,onColumnsAsideMenuClick:T,onColumnsAsideMenuMouseenter:D,onColumnsAsideMenuMouseleave:N,...q(s)}}});const ie={class:"layout-columns-aside"},ae=["onClick","onMouseenter","title"],re={class:"columns-vertical-title font12"},ue=["href"],ce={class:"columns-vertical-title font12"};function de(n,m,i,p,M,k){const h=c("SvgIcon"),A=c("el-scrollbar");return f(),g("div",ie,[d(A,null,{default:H(()=>[C("ul",{onMouseleave:m[0]||(m[0]=t=>n.onColumnsAsideMenuMouseleave())},[(f(!0),g(Q,null,W(n.columnsAsideList,(t,a)=>(f(),g("li",{key:a,onClick:u=>n.onColumnsAsideMenuClick(t,a),onMouseenter:u=>n.onColumnsAsideMenuMouseenter(t,a),ref_for:!0,ref:u=>{u&&(n.columnsAsideOffsetTopRefs[a]=u)},class:_({"layout-columns-active":n.liIndex===a,"layout-columns-hover":n.liHoverIndex===a}),title:t.meta.title},[!t.meta.isLink||t.meta.isLink&&t.meta.isIframe?(f(),g("div",{key:0,class:_(n.themeConfig.columnsAsideLayout)},[d(h,{name:t.meta.icon},null,8,["name"]),C("div",re,O(t.meta.title&&t.meta.title.length>=4?t.meta.title.substr(0,n.themeConfig.columnsAsideLayout==="columns-vertical"?4:3):t.meta.title),1)],2)):(f(),g("div",{key:1,class:_(n.themeConfig.columnsAsideLayout)},[C("a",{href:t.meta.isLink,target:"_blank"},[d(h,{name:t.meta.icon},null,8,["name"]),C("div",ce,O(t.meta.title&&t.meta.title.length>=4?t.meta.title.substr(0,n.themeConfig.columnsAsideLayout==="columns-vertical"?4:3):t.meta.title),1)],8,ue)],2))],42,ae))),128)),C("div",{ref:"columnsAsideActiveRef",class:_(n.themeConfig.columnsAsideStyle)},null,2)],32)]),_:1})])}const me=F(le,[["render",de],["__scopeId","data-v-4f9027e6"]]),fe=x({name:"layoutColumns",components:{Asides:te,Headers:ne,Mains:oe,ColumnsAside:me},setup(){const n=B(),{themeConfig:m}=S(n);return{isFixedHeader:Y(()=>m.value.isFixedHeader)}}}),pe={class:"layout-columns-warp"};function he(n,m,i,p,M,k){const h=c("ColumnsAside"),A=c("Asides"),t=c("Headers"),a=c("Mains"),u=c("el-scrollbar"),s=c("el-container"),v=c("el-backtop");return f(),L(s,{class:"layout-container"},{default:H(()=>[d(h),C("div",pe,[d(A),d(s,{class:_(["flex-center layout-backtop",{"layout-backtop":!n.isFixedHeader}])},{default:H(()=>[n.isFixedHeader?(f(),L(t,{key:0})):R("",!0),d(u,{class:_({"layout-backtop":n.isFixedHeader})},{default:H(()=>[n.isFixedHeader?R("",!0):(f(),L(t,{key:0})),d(a)]),_:1},8,["class"])]),_:1},8,["class"])]),d(v,{target:".layout-backtop .el-scrollbar__wrap"})]),_:1})}const He=F(fe,[["render",he]]);export{He as default};
